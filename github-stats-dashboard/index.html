<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GitHub Stats Dashboard</title>
  <meta name="description" content="GitHubユーザーの活動・リポジトリ・言語使用率を美しく可視化するダッシュボード" />
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- ヘッダー -->
  <header class="site-header">
    <div class="header-inner">
      <div class="logo">
        <i class="fa-brands fa-github logo-icon"></i>
        <span class="logo-text">GitHub Stats</span>
      </div>
      <p class="header-sub">GitHubユーザーの活動を可視化する</p>
    </div>
  </header>

  <!-- メインコンテンツ -->
  <main class="main-container">

    <!-- 検索セクション -->
    <section class="search-section" id="search-section">
      <div class="search-card glass-card">
        <h1 class="search-title">GitHubユーザーを検索</h1>
        <p class="search-description">GitHubのユーザー名を入力してください</p>
        <form class="search-form" id="search-form" aria-label="GitHubユーザー検索フォーム">
          <div class="search-input-wrapper">
            <i class="fa-brands fa-github search-icon"></i>
            <input
              type="text"
              id="username-input"
              class="search-input"
              placeholder="例: torvalds"
              autocomplete="off"
              aria-label="GitHubユーザー名"
              required
            />
            <button type="submit" class="search-btn" id="search-btn" aria-label="検索">
              <span class="btn-text">検索</span>
              <i class="fa-solid fa-magnifying-glass btn-icon"></i>
            </button>
          </div>
        </form>
        <!-- サジェスト例 -->
        <div class="quick-search">
          <span class="quick-label">例:</span>
          <button class="quick-btn" data-user="torvalds">torvalds</button>
          <button class="quick-btn" data-user="gvanrossum">gvanrossum</button>
          <button class="quick-btn" data-user="yuki-kimoto">yuki-kimoto</button>
        </div>
      </div>
    </section>

    <!-- ローディング表示 -->
    <section class="loading-section hidden" id="loading-section" aria-live="polite">
      <div class="loading-spinner">
        <div class="spinner-ring"></div>
        <p class="loading-text">GitHubからデータを取得中...</p>
      </div>
    </section>

    <!-- エラー表示 -->
    <section class="error-section hidden" id="error-section" aria-live="assertive">
      <div class="error-card glass-card">
        <i class="fa-solid fa-triangle-exclamation error-icon"></i>
        <h2 class="error-title" id="error-title">エラーが発生しました</h2>
        <p class="error-message" id="error-message"></p>
        <button class="retry-btn" id="retry-btn">
          <i class="fa-solid fa-rotate-right"></i> 再試行
        </button>
      </div>
    </section>

    <!-- ダッシュボードコンテンツ（取得後に表示） -->
    <section class="dashboard hidden" id="dashboard">

      <!-- プロフィールセクション -->
      <div class="profile-section">
        <div class="profile-card glass-card">
          <div class="profile-header">
            <img id="avatar" class="avatar" src="" alt="プロフィール画像" />
            <div class="profile-info">
              <h2 class="profile-name" id="profile-name"></h2>
              <p class="profile-login" id="profile-login"></p>
              <p class="profile-bio" id="profile-bio"></p>
              <div class="profile-meta">
                <span class="meta-item" id="profile-location">
                  <i class="fa-solid fa-location-dot"></i> <span></span>
                </span>
                <a class="meta-item meta-link" id="profile-blog" href="#" target="_blank" rel="noopener">
                  <i class="fa-solid fa-link"></i> <span></span>
                </a>
                <span class="meta-item" id="profile-joined">
                  <i class="fa-solid fa-calendar"></i> <span></span>
                </span>
              </div>
              <a class="github-link-btn" id="github-link" href="#" target="_blank" rel="noopener">
                <i class="fa-brands fa-github"></i> GitHubで見る
              </a>
            </div>
          </div>
        </div>

        <!-- 統計カード -->
        <div class="stats-grid">
          <div class="stat-card glass-card">
            <div class="stat-icon-wrap stat-green">
              <i class="fa-solid fa-star"></i>
            </div>
            <div class="stat-info">
              <span class="stat-value" id="stat-stars">0</span>
              <span class="stat-label">総スター数</span>
            </div>
          </div>
          <div class="stat-card glass-card">
            <div class="stat-icon-wrap stat-blue">
              <i class="fa-solid fa-book"></i>
            </div>
            <div class="stat-info">
              <span class="stat-value" id="stat-repos">0</span>
              <span class="stat-label">リポジトリ数</span>
            </div>
          </div>
          <div class="stat-card glass-card">
            <div class="stat-icon-wrap stat-purple">
              <i class="fa-solid fa-users"></i>
            </div>
            <div class="stat-info">
              <span class="stat-value" id="stat-followers">0</span>
              <span class="stat-label">フォロワー</span>
            </div>
          </div>
          <div class="stat-card glass-card">
            <div class="stat-icon-wrap stat-orange">
              <i class="fa-solid fa-code-fork"></i>
            </div>
            <div class="stat-info">
              <span class="stat-value" id="stat-forks">0</span>
              <span class="stat-label">総フォーク数</span>
            </div>
          </div>
        </div>
      </div>

      <!-- チャートセクション -->
      <div class="charts-section">

        <!-- 言語分布チャート -->
        <div class="chart-card glass-card">
          <h3 class="chart-title">
            <i class="fa-solid fa-code"></i> 言語使用率
          </h3>
          <div class="lang-chart-wrapper">
            <canvas id="language-chart" aria-label="言語使用率ドーナツチャート"></canvas>
            <div class="lang-legend" id="lang-legend"></div>
          </div>
        </div>

        <!-- アクティビティチャート -->
        <div class="chart-card chart-card--wide glass-card">
          <h3 class="chart-title">
            <i class="fa-solid fa-chart-bar"></i> 月別リポジトリ更新数（過去12ヶ月）
          </h3>
          <div class="activity-chart-wrapper">
            <canvas id="activity-chart" aria-label="月別アクティビティ棒グラフ"></canvas>
          </div>
        </div>

      </div>

      <!-- トップリポジトリセクション -->
      <div class="repos-section">
        <h3 class="section-title">
          <i class="fa-solid fa-fire"></i> トップリポジトリ
          <span class="section-subtitle">スター数順</span>
        </h3>
        <div class="repo-grid" id="repo-grid"></div>
      </div>

      <!-- 再検索ボタン -->
      <div class="back-section">
        <button class="back-btn" id="back-btn">
          <i class="fa-solid fa-arrow-left"></i> 別のユーザーを検索
        </button>
      </div>

    </section>

  </main>

  <!-- フッター -->
  <footer class="site-footer">
    <p>
      Powered by <a href="https://docs.github.com/en/rest" target="_blank" rel="noopener">GitHub REST API</a> &nbsp;|&nbsp;
      <i class="fa-solid fa-heart" style="color: #f85149;"></i> Built with HTML / CSS / JavaScript
    </p>
  </footer>

  <script src="charts.js"></script>
  <script src="app.js"></script>
</body>
</html>
